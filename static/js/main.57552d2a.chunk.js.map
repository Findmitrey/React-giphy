{"version":3,"sources":["components/Search/Search.js","components/Image/Image.js","components/Gif/Gif.js","components/Modal/ModalWindow.js","components/Modal/ModalHeader.js","components/Modal/ModalContent.js","components/Modal/Modal.js","App.js","index.js"],"names":["Search","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleChange","bind","assertThisInitialized","e","_this2","inputValue","target","value","clearTimeout","timerId","setTimeout","onChange","react_default","a","createElement","className","type","placeholder","onInput","required","React","Component","Image","src","alt","onClick","onClickImage","style","height","width","data-index","dataIndex","Grid","makeResponsive","measureItems","CSSGrid","maxWidth","Gif","state","data","url","offset","search","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","getNextData","unobserve","getData","createLink","displayСoefficient","arguments","length","undefined","widthWindow","window","innerWidth","heightWindow","innerHeight","limit","Math","floor","concat","api_key","_this3","isClear","fetch","then","response","json","gifData","setState","prevState","catch","console","log","_this4","domElem","document","querySelectorAll","observe","index","dataset","onClickImg","_this5","component","columns","columnWidth","gutterWidth","gutterHeight","layout","pinterest","duration","easing","map","item","key","itemHeight","parseInt","images","fixed_width","components_Image_Image","id","webp","clickImage","ModalWindow","children","ModalHeader","for","modalClose","ModalContent","href","rating","import_datetime","Modal","Modal_ModalWindow","Modal_ModalHeader","Modal_ModalContent","App","searchClick","imageData","modalOpen","info","body","classList","add","remove","components_Search_Search","components_Gif_Gif","ReactDOM","createPortal","components_Modal_Modal","getElementById","render","src_App"],"mappings":"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","file":"static/js/main.57552d2a.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nimport \"./Search.css\";\r\nclass Search extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleChange = this.handleChange.bind(this);\r\n  }\r\n  handleChange(e) {\r\n    const inputValue = e.target.value;\r\n    clearTimeout(this.timerId);\r\n    \r\n    this.timerId = setTimeout(()=>{\r\n      this.props.onChange(inputValue);\r\n    }, 400);\r\n    \r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"search\">\r\n        <input\r\n          className=\"search__input\"\r\n          type=\"text\"\r\n          placeholder=\"Search Gifs...\"\r\n          onInput={this.handleChange}\r\n          required\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Search;\r\n","import React from \"react\";\r\nimport \"./image.css\";\r\nclass Image extends React.Component {\r\n\r\n  render() {\r\n    return (\r\n      <img\r\n        src={this.props.src}\r\n        alt=\"\"\r\n        onClick={this.props.onClickImage}\r\n        style={{ height: this.props.height + \"px\", width: \"200px\" }}\r\n        data-index={this.props.dataIndex}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default Image;\r\n","import React from \"react\";\r\nimport Image from \"../Image/Image\";\r\n\r\nimport {\r\n  CSSGrid,\r\n  measureItems,\r\n  makeResponsive,\r\n  layout\r\n} from \"react-stonecutter\";\r\n\r\nimport \"./Gifs.css\";\r\n\r\nconst Grid = makeResponsive(measureItems(CSSGrid), {\r\n  maxWidth: 1200\r\n});\r\n\r\nclass Gif extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      data: [],\r\n      url: \"\",\r\n      offset: 0,\r\n      search: \"\"\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.observer = new IntersectionObserver(entries => {\r\n      entries.forEach(entry => {\r\n        if (entry.isIntersecting) {\r\n          this.getNextData();\r\n          this.observer.unobserve(entry.target);\r\n        }\r\n      });\r\n    });\r\n\r\n    this.getData(this.createLink());\r\n  }\r\n\r\n  createLink(displayСoefficient = 1) {\r\n    const widthWindow = window.innerWidth < 1200 ? window.innerWidth : 1200;\r\n    const heightWindow = window.innerHeight;\r\n    const widthImg = 200;\r\n    const heightImg = 200;\r\n\r\n    const limit = Math.floor(((widthWindow * heightWindow) / (widthImg * heightImg)) *displayСoefficient);\r\n\r\n    return `http://${this.props.url}?api_key=${this.props.api_key}&limit=${limit}&q=${this.props.search}`;\r\n  }\r\n\r\n  getData(url, isClear = false) {\r\n    fetch(url)\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        const gifData = data.data;\r\n        \r\n        this.setState(prevState => {\r\n          if (!isClear)\r\n            return {\r\n              data: prevState.data.concat(gifData),\r\n              url: this.props.url,\r\n              offset: prevState.offset + gifData.length\r\n            };\r\n          else\r\n            return {\r\n              data: gifData,\r\n              url: this.props.url,\r\n              offset: gifData.length,\r\n              search: this.props.search\r\n            };\r\n        });\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  getNextData() {\r\n    let url = `${this.createLink()}&offset=${this.state.offset}`;\r\n    this.getData(url);\r\n  }\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    if (props.search !== state.search)\r\n      return {\r\n        data: [],\r\n        offset: 0\r\n      };\r\n    return null;\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (\r\n      this.state.url !== this.props.url ||\r\n      this.state.search !== this.props.search\r\n    )\r\n      this.getData(this.createLink(), true);\r\n    else {\r\n      setTimeout(() => {\r\n        const domElem = document.querySelectorAll(\"span img\");\r\n        if (domElem.length) this.observer.observe(domElem[domElem.length - 1]);\r\n      }, 10);\r\n    }\r\n  }\r\n  clickImage(e) {\r\n    const index = e.target.dataset.index;\r\n    this.props.onClickImg(this.state.data[index]);\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"collection\">\r\n        <Grid\r\n          component=\"div\"\r\n          columns={5}\r\n          columnWidth={200}\r\n          gutterWidth={10}\r\n          gutterHeight={10}\r\n          layout={layout.pinterest}\r\n          duration={800}\r\n          easing=\"ease-out\"\r\n        >\r\n          {this.state.data.map((item, index) => (\r\n            <span\r\n              key={index}\r\n              itemHeight={parseInt(item.images.fixed_width.height, 10)}\r\n            >\r\n              <Image\r\n                key={item.id}\r\n                src={item.images.fixed_width.webp}\r\n                height={item.images.fixed_width.height}\r\n                onClickImage={this.clickImage.bind(this)}\r\n                dataIndex={index}\r\n              />\r\n            </span>\r\n          ))}\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Gif;\r\n","import React from \"react\";\r\n\r\nimport \"./ModalCss/ModalWindow.css\";\r\nclass ModalWindow extends React.Component {\r\n  render() {\r\n    return (\r\n      <aside className=\"modal\" id=\"modal\">\r\n        {this.props.children}\r\n      </aside>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ModalWindow;\r\n","import React from \"react\";\r\nimport './ModalCss/ModalHeader.css'\r\nclass ModalHeader extends React.Component {\r\n\r\n\r\n  render() {\r\n    return (\r\n      <header className=\"modal__title\">\r\n        <h2>Details</h2>\r\n        <label className=\"modal_close\" for=\"modal\" onClick={this.props.modalClose}>\r\n          &#10005;\r\n        </label>\r\n        <hr/>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ModalHeader;\r\n","import React from \"react\";\r\nimport \"./ModalCss/ModalContent.css\";\r\n\r\nclass ModalContent extends React.Component {\r\n  render() {\r\n    const data = this.props.data;\r\n    return (\r\n      <section className=\"modal__text\">\r\n        <div className=\"modal__picture\">\r\n          <img src={data.images.fixed_width.webp} alt=\"\" />\r\n        </div>\r\n        <div className=\"modal__info\">\r\n          <p>\r\n            Source URL:{\" \"}\r\n            <a href={data.images.fixed_width.webp}>\r\n              {data.images.fixed_width.webp}\r\n            </a>\r\n          </p>\r\n          <p>Content rating :{data.rating}</p>\r\n          <p>Import date: {data.import_datetime}</p>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ModalContent;\r\n","import React from \"react\";\r\n\r\nimport ModalWindow from \"./ModalWindow\";\r\nimport ModalHeader from \"./ModalHeader\";\r\nimport ModalContent from \"./ModalContent\";\r\n\r\nimport \"./ModalCss/Modal.css\";\r\nclass Modal extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"modalOverlay\">\r\n        <ModalWindow>\r\n          <ModalHeader modalClose={this.props.modalClose} />\r\n          <ModalContent data={this.props.data} />\r\n        </ModalWindow>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom'\nimport Search from './components/Search/Search'\nimport Gif from './components/Gif/Gif'\nimport Modal from './components/Modal/Modal';\n// import ModalWindow from \"./components/ModalWindow/ModalWindow\"\n\nclass App extends React.Component {\n    constructor(props){\n      super(props);\n      this.searchClick = this.searchClick.bind(this);\n      this.state = {\n        url: 'api.giphy.com/v1/gifs/trending',\n        api_key: 'cyzkcIRHhtGX0IFJ5f1u8cZArMiYoSyR',\n        limit: 1,\n        search: '',\n        imageData: {},\n        modalOpen : false\n      }\n    }\n\n    searchClick(value){\n      const url = value ? 'api.giphy.com/v1/gifs/search' : 'api.giphy.com/v1/gifs/trending'\n      this.setState( prevState =>{\n        if(prevState.search !== value)\n          return {\n            url,\n            search: value\n          }\n      });\n    }\n\n    clickImage(imageData){\n      this.setState(prevState => ({imageData, modalOpen: !prevState.modalOpen}))\n    }\n\n    modalClose(){\n      this.setState(prevState => ({modalOpen: !prevState.modalOpen}))\n    }\n\n    render() {\n      \n      if(this.state.search)\n        this.info = `Results: #${this.state.search}`\n      else this.info = 'Trending Gifs'\n\n      if(this.state.modalOpen)\n        document.body.classList.add('no-scroll');\n      else document.body.classList.remove('no-scroll');\n\n      return (\n        <div className=\"container\">\n          <Search onChange={this.searchClick}/>\n          <h3 className=\"infoSearch\">{this.info}</h3>\n          <Gif url={this.state.url} \n               api_key={this.state.api_key} \n               limit={this.state.limit} \n               search={this.state.search}\n               onClickImg={this.clickImage.bind(this)}\n          />\n          {this.state.modalOpen &&\n            ReactDOM.createPortal(\n              <Modal data={this.state.imageData} modalClose={this.modalClose.bind(this)} />,\n              document.getElementById('modal-window')\n            )\n          }\n        </div>\n      )\n    }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}