(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(62)},27:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(12),c=a.n(r),s=(a(27),a(1)),o=a(2),l=a(4),h=a(3),u=a(7),m=a(5),d=(a(28),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){var t=this,a=e.target.value;clearTimeout(this.timerId),this.timerId=setTimeout(function(){t.props.onChange(a)},400)}},{key:"render",value:function(){return i.a.createElement("div",{className:"search"},i.a.createElement("input",{className:"search__input",type:"text",placeholder:"Search Gifs...",onInput:this.handleChange,required:!0}))}}]),t}(i.a.Component)),p=(a(29),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return i.a.createElement("img",{src:this.props.src,alt:"",onClick:this.props.onClickImage,style:{height:this.props.height+"px",width:"200px"},"data-index":this.props.dataIndex})}}]),t}(i.a.Component)),f=a(10),g=(a(57),Object(f.makeResponsive)(Object(f.measureItems)(f.CSSGrid),{maxWidth:1200})),b=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={data:[],url:"",offset:0,search:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.observer=new IntersectionObserver(function(t){t.forEach(function(t){t.isIntersecting&&(e.getNextData(),e.observer.unobserve(t.target))})}),this.getData(this.createLink())}},{key:"createLink",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=window.innerWidth<1200?window.innerWidth:1200,a=window.innerHeight,n=Math.floor(t*a/4e4*e);return"http://".concat(this.props.url,"?api_key=").concat(this.props.api_key,"&limit=").concat(n,"&q=").concat(this.props.search)}},{key:"getData",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];fetch(e).then(function(e){return e.json()}).then(function(e){var n=e.data;t.setState(function(e){return a?{data:n,url:t.props.url,offset:n.length,search:t.props.search}:{data:e.data.concat(n),url:t.props.url,offset:e.offset+n.length}})}).catch(function(e){console.log(e)})}},{key:"getNextData",value:function(){var e="".concat(this.createLink(),"&offset=").concat(this.state.offset);this.getData(e)}},{key:"componentDidUpdate",value:function(){var e=this;this.state.url!==this.props.url||this.state.search!==this.props.search?this.getData(this.createLink(),!0):setTimeout(function(){var t=document.querySelectorAll("span img");t.length&&e.observer.observe(t[t.length-1])},10)}},{key:"clickImage",value:function(e){var t=e.target.dataset.index;this.props.onClickImg(this.state.data[t])}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"collection"},i.a.createElement(g,{component:"div",columns:5,columnWidth:200,gutterWidth:10,gutterHeight:10,layout:f.layout.pinterest,duration:800,easing:"ease-out"},this.state.data.map(function(t,a){return i.a.createElement("span",{key:a,itemHeight:parseInt(t.images.fixed_width.height,10)},i.a.createElement(p,{key:t.id,src:t.images.fixed_width.webp,height:t.images.fixed_width.height,onClickImage:e.clickImage.bind(e),dataIndex:a}))})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.search!==t.search?{data:[],offset:0}:null}}]),t}(i.a.Component),v=(a(58),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return i.a.createElement("aside",{className:"modal",id:"modal"},this.props.children)}}]),t}(i.a.Component)),O=(a(59),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return i.a.createElement("header",{className:"modal__title"},i.a.createElement("h2",null,"Details"),i.a.createElement("label",{className:"modal_close",for:"modal",onClick:this.props.modalClose},"\u2715"),i.a.createElement("hr",null))}}]),t}(i.a.Component)),k=(a(60),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.data;return i.a.createElement("section",{className:"modal__text"},i.a.createElement("div",{className:"modal__picture"},i.a.createElement("img",{src:e.images.fixed_width.webp,alt:""})),i.a.createElement("div",{className:"modal__info"},i.a.createElement("p",null,"Source URL:"," ",i.a.createElement("a",{href:e.images.fixed_width.webp},e.images.fixed_width.webp)),i.a.createElement("p",null,"Content rating :",e.rating),i.a.createElement("p",null,"Import date: ",e.import_datetime)))}}]),t}(i.a.Component)),y=(a(61),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"modalOverlay"},i.a.createElement(v,null,i.a.createElement(O,{modalClose:this.props.modalClose}),i.a.createElement(k,{data:this.props.data})))}}]),t}(i.a.Component)),j=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).searchClick=a.searchClick.bind(Object(u.a)(a)),a.state={url:"api.giphy.com/v1/gifs/trending",api_key:"cyzkcIRHhtGX0IFJ5f1u8cZArMiYoSyR",limit:1,search:"",imageData:{},modalOpen:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"searchClick",value:function(e){var t=e?"api.giphy.com/v1/gifs/search":"api.giphy.com/v1/gifs/trending";this.setState(function(a){if(a.search!==e)return{url:t,search:e}})}},{key:"clickImage",value:function(e){this.setState(function(t){return{imageData:e,modalOpen:!t.modalOpen}})}},{key:"modalClose",value:function(){this.setState(function(e){return{modalOpen:!e.modalOpen}})}},{key:"render",value:function(){return this.state.search?this.info="Results: #".concat(this.state.search):this.info="Trending Gifs",this.state.modalOpen?document.body.classList.add("no-scroll"):document.body.classList.remove("no-scroll"),i.a.createElement("div",{className:"container"},i.a.createElement(d,{onChange:this.searchClick}),i.a.createElement("h3",{className:"infoSearch"},this.info),i.a.createElement(b,{url:this.state.url,api_key:this.state.api_key,limit:this.state.limit,search:this.state.search,onClickImg:this.clickImage.bind(this)}),this.state.modalOpen&&c.a.createPortal(i.a.createElement(y,{data:this.state.imageData,modalClose:this.modalClose.bind(this)}),document.getElementById("modal-window")))}}]),t}(i.a.Component);c.a.render(i.a.createElement(j,null),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.57552d2a.chunk.js.map